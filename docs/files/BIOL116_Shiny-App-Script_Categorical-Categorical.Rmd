---
title: "BIOL116_Shiny-App-Script_Categorical-Categorical"
date: "`r Sys.Date()`"
author: "Your Name Here"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = TRUE) # makes sure R code or messages are not printed
```

# Introduction & Instructions

This script is intended as an alternative to using the BIOL 116 Shiny App. As such, you can use it to produce figures, calculate descriptive statistics, and perform statistical analyses on your data. This specific script is intended to be used if both your response (dependent) and explanatory (independent) variables are **categorical** 

In this `R` Markdown document the code used to perform actions such as producing figures is located within the `R` chunks. Alongside each line of code is a comment proceeded with a hashtag (#). The comments are descriptions of what the code is doing. **Things you are required to do are indicated with asterisks (*).**

Be sure to consult the rubric to ensure you have done everything that was asked for your assignment!

## Step 1: Set Your Working Directory

Follow the instructions [here](https://ubco-biology.github.io/Procedures-and-Guidelines/set-a-working-directory-in-rstudio.html) in the Procedures and Guidelines Document to set your working directory. 

## Step 2: Installing & Loading Required Packages

Copy the following code into the RStudio Console (lower left pane of RStudio) to install the necessary packages:

install.packages("ggplot2")
install.packages("ggmosaic")
install.packages("dplyr")
install.packages("stats")

Once the required packages are installed, you need to load these packages within your R Markdown document. To load the packages, run the `R` chunk below.  

```{r}

library("ggplot2")  
library("ggmosaic")
library("dplyr") 
library("stats")

```

## Step 3: Uploading Your Data

Make sure your data is saved as a UTF-8 CSV file and is located within your working directory. In other words, your data should be saved in the same folder as the R Project you created in Step 1. 

* Replace `insert-data-file-name-here.csv` with the file name that your data is saved as to your computer

```{r}

my_data <- read.csv(file = "data.csv", header = TRUE) 

# Reads your CSV file into R
# header = TRUE if the first row of values in your data has header information (aka column names)
# header = FALSE if there is no header information

```

## Step 4: Producing Figures

* Replace **TWO** `insert-x-variable-name-here` with your explanatory (independent) variable's name
* Replace **TWO** `insert-y-variable-name-here` with your response (dependent) variable's name

```{r}
my_data$insert-x-variable-name-here <- as.factor(my_data$insert-x-variable-name-here) # factoring the explanatory variable
my_data$insert-y-variable-name-here <- as.factor(my_data$insert-y-variable-name-here) # factoring the response variable
```


**Code for Creating a Mosaic Plot**

*  Replace `Insert your figure caption here` with your desired figure caption
* Replace **TWO** `insert-x-variable-name-here` with your explanatory (independent) variable's name
* Replace **TWO** `insert-y-variable-name-here` with your response (dependent) variable's name

```{r fig.cap="Insert your figure caption here."}

my_data %>%
  ggplot() +
    geom_mosaic(aes(x = product(insert-x-variable-name-here), fill = insert-y-variable-name-here)) + # defines the variables 
    scale_y_continuous(breaks = seq(0, 1, by = 0.2)) + # makes adjustments to the y axis 
    labs(x = "insert-x-variable-name-here", y = 'Relative frequency', fill = "insert-y-variable-name-here") + # axes labels
    theme(
      panel.background = element_blank(), # no colour for plot area
      plot.background = element_blank()) # no colour for whole chart incl. behind axes

```

**OPTIONAL:** 

If you are feeling ambitious, you are welcome to utilize [this resource](https://haleyjeppson.github.io/ggmosaic/) to alter the script to further customize your figures. 

## Step 5: Calculating Descriptive Statistics

* Replace **ONE** `insert-x-variable-name-here` with your explanatory (independent) variable's name
* Replace **ONE** `insert-y-variable-name-here` with your response (dependent) variable's name

```{r}
stats <- my_data %>%
         select(insert-x-variable-name-here, insert-y-variable-name-here) # defines which variables to display

table(stats) # displays the descriptive statistics in a table
```

## Step 6: Performing Statistical Analyses

The appropriate statistical test to assess for a relationship between two categorical variables depends on how many groups each categorical variable has. If BOTH categorical variables have exactly two groups then Fisher's Exact Test is best. If either of the categorical variables has more than two groups then a Chi-Square Contingency Analysis should be performed. 

* Once you have decided which test is best for you data, **DELETE** the R chunk for the opposite statistical test so it is not included in your final PDF output. 
    * For example, if both categorical variables have two groups and you want to perform a Fisher's Exact Test: **KEEP** the R chunk that performs the Fisher's Exact Test but **DELETE** the R chunk that performs the Chi-Square Contingency Analysis

**Fisher's Exact Test**

* Replace **ONE** `insert-x-variable-name-here` with your explanatory (independent) variable's name
* Replace **ONE** `insert-y-variable-name-here` with your response (dependent) variable's name

```{r}
fisher.table <- xtabs(~ insert-y-variable-name-here + insert-x-variable-name-here, data = my_data)
fisher.results <- fisher.test(fisher.table)
fisher.results
```

**Code for Chi-Square Contingency Analysis**

* Replace **ONE** `insert-x-variable-name-here` with your explanatory (independent) variable's name
* Replace **ONE** `insert-y-variable-name-here` with your response (dependent) variable's name

```{r}

chi.table <- xtabs(~ insert-y-variable-name-here + insert-x-variable-name-here, data = my_data)
chisq.results <- chisq.test(chi.table)
chisq.results

```

## Step 7: Creating a PDF of the Results

Follow these steps to create a PDF of the results from your analysis.

* Click the dropdown arrow to the right of the Knit button
* Next click Knit to PDF
